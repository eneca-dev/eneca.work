# üîÑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å Worksection

## üìñ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **ws-to-work-integration** –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Worksection –≤ —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏ **eneca.work**. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ API Worksection –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Supabase PostgreSQL.

### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –∑–∞–¥–∞—á –∏–∑ Worksection –≤ 5-—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏ eneca.work:

```
Worksection          ‚Üí    eneca.work
================     ‚Üí    ==================
Project              ‚Üí    Manager + Project
Task Level 1         ‚Üí    Stage (–°—Ç–∞–¥–∏—è)
Task Level 2         ‚Üí    Object (–û–±—ä–µ–∫—Ç)
Task Level 3         ‚Üí    Section (–†–∞–∑–¥–µ–ª)
Users                ‚Üí    Employees
```

### üé≤ –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –º–∞–ø–ø–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö

```mermaid
graph LR
    WS[Worksection] --> INT[ws-to-work-integration]
    INT --> SB[Supabase DB]
    SB --> ENE[eneca.work]
    
    subgraph "Worksection —Å—Ç—Ä—É–∫—Ç—É—Ä–∞"
        WP[Project + Tags]
        WT1[Task Level 1]
        WT2[Task Level 2] 
        WT3[Task Level 3]
        WU[Users]
    end
    
    subgraph "eneca.work —Å—Ç—Ä—É–∫—Ç—É—Ä–∞"
        EP[Projects]
        ES[Stages]
        EO[Objects]
        EC[Sections]
        EE[Employees]
    end
    
    WP --> EP
    WP --> ES
    WT1 --> EO
    WT2 --> EC
    WT3 --> EC
    WU --> EE
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Backend**: Node.js + Express.js
- **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: Worksection REST API
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: Supabase PostgreSQL
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: Vanilla HTML/CSS/JS
- **–î–µ–ø–ª–æ–π**: Heroku (https://ws-to-work-integration-eneca-7cab192e5438.herokuapp.com/)
- **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: localhost:3001

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
ws-to-work-integration/
‚îú‚îÄ‚îÄ src/app.js              # –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä Express
‚îú‚îÄ‚îÄ functions/
‚îÇ   ‚îú‚îÄ‚îÄ projects.js         # –õ–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ worksection-api.js  # API –∫–ª–∏–µ–Ω—Ç Worksection
‚îÇ   ‚îî‚îÄ‚îÄ supabase-client.js  # API –∫–ª–∏–µ–Ω—Ç Supabase
‚îú‚îÄ‚îÄ public/                 # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îî‚îÄ‚îÄ docs/                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (—Å—Ç—Ä–æ–≥–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å)

#### 1Ô∏è‚É£ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤** (üè¢ Projects)
**–ò—Å—Ç–æ—á–Ω–∏–∫**: –ü—Ä–æ–µ–∫—Ç—ã Worksection —Å –º–µ—Ç–∫–æ–π `"eneca.work sync"`

**–ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö**:
```javascript
Worksection Project ‚Üí Supabase projects
{
  name                ‚Üí project_name
  description         ‚Üí project_description  
  id                  ‚Üí external_id
  status              ‚Üí project_status
  user_to.name        ‚Üí manager_id (—á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫ –≤ profiles)
  "worksection"       ‚Üí external_source
}
```

**–õ–æ–≥–∏–∫–∞**:
- –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ API `get_projects` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `extra: 'tags,users'`
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ –º–µ—Ç–∫–µ `"eneca.work sync"` (ID –º–µ—Ç–∫–∏: 230964)
- –ü–æ–∏—Å–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ –ø–æ–ª—é `user_to` –∏–ª–∏ –ø–µ—Ä–≤–æ–º—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ `external_id`

#### 2Ô∏è‚É£ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞–¥–∏–π** (üéØ Stages)
**–ò—Å—Ç–æ—á–Ω–∏–∫**: –ú–µ—Ç–∫–∏ (tags) –ø—Ä–æ–µ–∫—Ç–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —Å–ª–æ–≤–æ "—Å—Ç–∞–¥–∏—è"

**–ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö**:
```javascript
Worksection Project Tag ‚Üí Supabase stages
{
  tag.name            ‚Üí stage_name
  tag.id              ‚Üí external_id
  project.id          ‚Üí stage_project_id (—á–µ—Ä–µ–∑ —Å–≤—è–∑–∫—É)
  "worksection"       ‚Üí external_source
}
```

**–õ–æ–≥–∏–∫–∞**:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ—Ç–æ–∫ –∫–∞–∂–¥–æ–≥–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- –ü–æ–∏—Å–∫ –º–µ—Ç–æ–∫, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö "—Å—Ç–∞–¥–∏—è" (—Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ)
- –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞–¥–∏–π –≤ —Ä–∞–º–∫–∞—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç–∞–¥–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

#### 3Ô∏è‚É£ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤** (üì¶ Objects)
**–ò—Å—Ç–æ—á–Ω–∏–∫**: –ó–∞–¥–∞—á–∏ Worksection –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è (—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–¥–∞—á–∏)

**–ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö**:
```javascript
Worksection Task Level 1 ‚Üí Supabase objects
{
  title               ‚Üí object_name
  text                ‚Üí object_description
  id                  ‚Üí external_id
  tags                ‚Üí stage_id (–ø–æ–∏—Å–∫ —Å—Ç–∞–¥–∏–∏ –ø–æ –º–µ—Ç–∫–µ)
  user_to.name        ‚Üí object_responsible_id
  status              ‚Üí object_status
  date_start          ‚Üí object_start_date
  date_finish         ‚Üí object_end_date
}
```

**–õ–æ–≥–∏–∫–∞**:
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ API `get_tasks` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –ø–µ—Ä–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è (–±–µ–∑ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–¥–∞—á)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞–¥–∏–∏ —á–µ—Ä–µ–∑ –º–µ—Ç–∫–∏ –∑–∞–¥–∞—á–∏
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –¥–∞—Ç

#### 4Ô∏è‚É£ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤** (üìë Sections)
**–ò—Å—Ç–æ—á–Ω–∏–∫**: –ü–æ–¥–∑–∞–¥–∞—á–∏ Worksection (–∑–∞–¥–∞—á–∏ –≤—Ç–æ—Ä–æ–≥–æ –∏ —Ç—Ä–µ—Ç—å–µ–≥–æ —É—Ä–æ–≤–Ω–µ–π)

**–ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö**:
```javascript
Worksection Subtask ‚Üí Supabase sections
{
  title               ‚Üí section_name
  text                ‚Üí section_description
  id                  ‚Üí external_id
  parent_task_id      ‚Üí section_object_id (—á–µ—Ä–µ–∑ —Å–≤—è–∑–∫—É)
  user_to.name        ‚Üí section_responsible_id
  status              ‚Üí section_status
  date_start          ‚Üí section_start_date
  date_finish         ‚Üí section_end_date
  priority            ‚Üí section_priority
}
```

**–õ–æ–≥–∏–∫–∞**:
- –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥–∑–∞–¥–∞—á –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (Level 2 ‚Üí Level 3)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ –∏–µ—Ä–∞—Ä—Ö–∏—é
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏

## üéõÔ∏è API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ API –º–µ—Ç–æ–¥—ã

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `/api/sync/projects` | POST | –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ |
| `/api/projects/sync` | GET | –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å sync —Ç–µ–≥–æ–º |
| `/api/projects/tags` | GET | –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–µ–≥–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤ |
| `/api/supabase/projects` | GET | –ü—Ä–æ–µ–∫—Ç—ã –∏–∑ Supabase |
| `/api/health` | GET | –°—Ç–∞—Ç—É—Å –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞ |
| `/api/stats` | GET | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ |

### –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (`runFullSync`)

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π**:
1. **–≠—Ç–∞–ø 1/4**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ (`syncProjectsToSupabase`)
2. **–≠—Ç–∞–ø 2/4**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞–¥–∏–π (`syncStagesFromWorksection`)  
3. **–≠—Ç–∞–ø 3/4**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ (`syncObjectsFromWorksection`)
4. **–≠—Ç–∞–ø 4/4**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤ (`syncSectionsFromWorksection`)

**–†–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞**:
```javascript
{
  success: boolean,
  created: Array,    // –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
  updated: Array,    // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
  unchanged: Array,  // –ù–µ–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
  errors: Array      // –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
}
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# Supabase –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Worksection API
WORKSECTION_DOMAIN=your-domain.worksection.com
WORKSECTION_HASH=your-api-hash

# –°–µ—Ä–≤–µ—Ä
PORT=3001
HOST=localhost
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–ü—Ä–æ–µ–∫—Ç—ã –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**:
- –î–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –º–µ—Ç–∫—É `"eneca.work sync"` (ID: 230964)
- –ê–∫—Ç–∏–≤–Ω—ã–µ –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã
- –° –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –ø—Ä–æ–µ–∫—Ç–∞

**–ó–∞–¥–∞—á–∏ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**:
- –ü—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º—ã–º –ø—Ä–æ–µ–∫—Ç–∞–º
- –ò–º–µ—é—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
- –°–æ–¥–µ—Ä–∂–∞—Ç –º–µ—Ç–∫–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞–¥–∏–π

## üéØ –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–æ–ª–µ–π

### –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**:
1. –ü–æ–∏—Å–∫ –ø–æ –ø–æ–ª—é `user_to` (–æ—Å–Ω–æ–≤–Ω–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä)
2. –ü–æ–∏—Å–∫ —Å—Ä–µ–¥–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å —Ä–æ–ª—å—é `admin` –∏–ª–∏ `manager`
3. Fallback –Ω–∞ –ø–µ—Ä–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
4. –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å –±–∞–∑–æ–π eneca.work –ø–æ –∏–º–µ–Ω–∏ –∏ email

**–ü–æ–∏—Å–∫ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞ –∑–∞–¥–∞—á–∏**:
1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ `user_to` –∏–∑ –∑–∞–¥–∞—á–∏
2. –ü–æ–∏—Å–∫ –≤ Supabase –ø–æ –ø–æ–ª–Ω–æ–º—É –∏–º–µ–Ω–∏
3. –ü–æ–∏—Å–∫ –ø–æ email –∫–∞–∫ fallback
4. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

**–î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π**:
```
üöÄ === –ù–ê–ß–ê–õ–û –ü–û–õ–ù–û–ô –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò ===
‚è∞ –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞: 15.01.2024, 14:30:25

üè¢ –≠–¢–ê–ü 1/4: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤...
‚úÖ –ü—Ä–æ–µ–∫—Ç—ã: —Å–æ–∑–¥–∞–Ω–æ 2, –æ–±–Ω–æ–≤–ª–µ–Ω–æ 1, –æ—à–∏–±–æ–∫ 0
  üìù –°–æ–∑–¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã:
    + –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç (ID: proj_123)
  üìù –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã:
    ‚Üª –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç (ID: proj_456)

üéØ –≠–¢–ê–ü 2/4: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞–¥–∏–π...
‚úÖ –°—Ç–∞–¥–∏–∏: —Å–æ–∑–¥–∞–Ω–æ 5, –æ–±–Ω–æ–≤–ª–µ–Ω–æ 2, –æ—à–∏–±–æ–∫ 0

üì¶ –≠–¢–ê–ü 3/4: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤...
‚úÖ –û–±—ä–µ–∫—Ç—ã: —Å–æ–∑–¥–∞–Ω–æ 12, –æ–±–Ω–æ–≤–ª–µ–Ω–æ 3, –æ—à–∏–±–æ–∫ 0

üìë –≠–¢–ê–ü 4/4: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤...
‚úÖ –†–∞–∑–¥–µ–ª—ã: —Å–æ–∑–¥–∞–Ω–æ 28, –æ–±–Ω–æ–≤–ª–µ–Ω–æ 5, –æ—à–∏–±–æ–∫ 1

üèÅ === –ó–ê–í–ï–†–®–ï–ù–ò–ï –ü–û–õ–ù–û–ô –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò ===
‚è±Ô∏è –û–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 45.3 —Å–µ–∫
‚úÖ –í—Å–µ–≥–æ —Å–æ–∑–¥–∞–Ω–æ: 47
üîÑ –í—Å–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ: 11
‚ùå –í—Å–µ–≥–æ –æ—à–∏–±–æ–∫: 1
```

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏**:
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- –£—Å–ø–µ—à–Ω—ã–µ/–Ω–µ—É—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞

## üö¶ –°–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Å—Ç–∞—Ç—É—Å—ã

### –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤

```javascript
Worksection ‚Üí eneca.work
"active"    ‚Üí "active"
"completed" ‚Üí "archive"  
"paused"    ‚Üí "paused"
"cancelled" ‚Üí "canceled"
```

### –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–¥–∞—á

```javascript
Worksection ‚Üí eneca.work
"new"       ‚Üí "planning"
"active"    ‚Üí "in_progress"
"completed" ‚Üí "completed"
"paused"    ‚Üí "paused"
"cancelled" ‚Üí "canceled"
```

## üõ†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π

**–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫**:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –ø–æ `external_id`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏**:
- –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ —á–∞—Å—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ú–µ—Ç–æ–¥—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**:
- –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø–∏—Å–µ–π
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã API –∑–∞–ø—Ä–æ—Å–æ–≤

## üé® –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

**–ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å**:
- –ö–Ω–æ–ø–∫–∏ –∑–∞–ø—É—Å–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø–∞–º
- –ö–Ω–æ–ø–∫–∞ –ø–æ–ª–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–∞–Ω–µ–ª–∏**:
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ó–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã –∏ –º–µ—Ç—Ä–∏–∫–∏
- –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**API –∫–ª—é—á–∏**:
- Service Role Key –¥–ª—è Supabase (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ë–î)
- Hash-–∫–ª—é—á –¥–ª—è Worksection API
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∑–∞—â–∏—Ç—ã credentials

**–°–µ—Ç–µ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- HTTPS –¥–ª—è Heroku –¥–µ–ø–ª–æ—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

**–ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏**:
- –£—Å–ø–µ—à–Ω–æ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (% —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –∑–∞ –ø–µ—Ä–∏–æ–¥
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–∏—Ö API

**–ú–µ—Ç—Ä–∏–∫–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏**:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- –†–æ—Å—Ç –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö
- –ß–∞—Å—Ç–æ—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º eneca.work

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ eneca.work**:
```bash
# .env.local (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
NEXT_PUBLIC_WS_INTEGRATION_URL=http://localhost:3001

# .env.production (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)  
NEXT_PUBLIC_WS_INTEGRATION_URL=https://ws-to-work-integration-eneca-7cab192e5438.herokuapp.com
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

**–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**:
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –ö–Ω–æ–ø–∫–∞ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Worksection" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–∏—Å—Ç–µ–º—ã
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –õ–æ–≥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

**–ò–Ω–¥–∏–∫–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**:
- –ü—Ä–æ–µ–∫—Ç—ã —Å `external_source: 'worksection'` –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
- –ü–æ–ª—è `external_id` –∏ `external_updated_at` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª–µ–π
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –¥–∞–Ω–Ω—ã—Ö

**–ü–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**:
1. –î–∞–Ω–Ω—ã–µ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —á–∞—Å—Ç—å—é —Å–∏—Å—Ç–µ–º—ã eneca.work
2. –í–æ–∑–º–æ–∂–Ω–æ —Ä—É—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
3. –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è
4. –£–¥–∞–ª–µ–Ω–Ω—ã–µ –≤ Worksection —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ eneca.work

**–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏**:
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —É —Ä—É—á–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ eneca.work
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö eneca.work

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–¢–∞–±–ª–∏—Ü–∞ `projects`**:
```sql
projects (
  project_id UUID PRIMARY KEY,
  project_name TEXT NOT NULL,
  project_description TEXT,
  manager_id UUID REFERENCES profiles(user_id),
  project_status TEXT DEFAULT 'active',
  external_id TEXT UNIQUE,           -- ID –∏–∑ Worksection
  external_source TEXT,              -- 'worksection'
  external_updated_at TIMESTAMPTZ,   -- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
)
```

**–¢–∞–±–ª–∏—Ü–∞ `stages`**:
```sql
stages (
  stage_id UUID PRIMARY KEY,
  stage_name TEXT NOT NULL,
  stage_description TEXT,
  stage_project_id UUID REFERENCES projects(project_id),
  external_id TEXT UNIQUE,           -- ID –º–µ—Ç–∫–∏ –∏–∑ Worksection
  external_source TEXT,              -- 'worksection'
  external_updated_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
)
```

**–¢–∞–±–ª–∏—Ü–∞ `objects`**:
```sql
objects (
  object_id UUID PRIMARY KEY,
  object_name TEXT NOT NULL,
  object_description TEXT,
  stage_id UUID REFERENCES stages(stage_id),
  object_responsible_id UUID REFERENCES profiles(user_id),
  object_status TEXT DEFAULT 'planning',
  object_start_date DATE,
  object_end_date DATE,
  external_id TEXT UNIQUE,           -- ID –∑–∞–¥–∞—á–∏ –∏–∑ Worksection
  external_source TEXT,              -- 'worksection'
  external_updated_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
)
```

**–¢–∞–±–ª–∏—Ü–∞ `sections`**:
```sql
sections (
  section_id UUID PRIMARY KEY,
  section_name TEXT NOT NULL,
  section_description TEXT,
  section_object_id UUID REFERENCES objects(object_id),
  section_responsible_id UUID REFERENCES profiles(user_id),
  section_status TEXT DEFAULT 'planning',
  section_start_date DATE,
  section_end_date DATE,
  section_priority INTEGER DEFAULT 1,
  external_id TEXT UNIQUE,           -- ID –ø–æ–¥–∑–∞–¥–∞—á–∏ –∏–∑ Worksection
  external_source TEXT,              -- 'worksection'
  external_updated_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
)
```

### –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```sql
-- –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ external_id
CREATE INDEX idx_projects_external_id ON projects(external_id);
CREATE INDEX idx_stages_external_id ON stages(external_id);
CREATE INDEX idx_objects_external_id ON objects(external_id);
CREATE INDEX idx_sections_external_id ON sections(external_id);

-- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É –¥–∞–Ω–Ω—ã—Ö
CREATE INDEX idx_projects_external_source ON projects(external_source);
CREATE INDEX idx_stages_external_source ON stages(external_source);
CREATE INDEX idx_objects_external_source ON objects(external_source);
CREATE INDEX idx_sections_external_source ON sections(external_source);
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### Heroku –¥–µ–ø–ª–æ–π

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π**:
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Heroku
heroku git:remote -a ws-to-work-integration-eneca

# –î–µ–ø–ª–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π
git push heroku main

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
heroku logs --tail -a ws-to-work-integration-eneca
```

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Heroku**:
```bash
heroku config:set SUPABASE_URL=... -a ws-to-work-integration-eneca
heroku config:set SUPABASE_SERVICE_ROLE_KEY=... -a ws-to-work-integration-eneca
heroku config:set WORKSECTION_DOMAIN=... -a ws-to-work-integration-eneca
heroku config:set WORKSECTION_HASH=... -a ws-to-work-integration-eneca
```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

**–ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ**:
```bash
cd ws-to-work-integration
npm install
npm run dev
# –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:3001
```

**–ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**:
```bash
cd eneca.work
# NEXT_PUBLIC_WS_INTEGRATION_URL=http://localhost:3001 –≤ .env.local
npm run dev
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://localhost:3000
```

## üìã –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

### ‚ú® –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞

**ws-to-work-integration** - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å), –∫–æ—Ç–æ—Ä–æ–µ:

1. **–ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Worksection API** –∏ –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç—ã —Å –º–µ—Ç–∫–æ–π "eneca.work sync"
2. **–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö** –∏–∑ –ø–ª–æ—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Worksection –≤ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é 5-—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É eneca.work
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –≤ 4 —ç—Ç–∞–ø–∞**:
   - –ü—Ä–æ–µ–∫—Ç—ã ‚Üí –ú–µ–Ω–µ–¥–∂–µ—Ä—ã/–ü—Ä–æ–µ–∫—Ç—ã
   - –ú–µ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ ‚Üí –°—Ç–∞–¥–∏–∏  
   - –ó–∞–¥–∞—á–∏ L1 ‚Üí –û–±—ä–µ–∫—Ç—ã
   - –ü–æ–¥–∑–∞–¥–∞—á–∏ L2-3 ‚Üí –†–∞–∑–¥–µ–ª—ã
4. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Supabase** PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
5. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å eneca.work** —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è NEXT_PUBLIC_WS_INTEGRATION_URL

### üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
- –û—Ç–∫—Ä—ã—Ç—å https://ws-to-work-integration-eneca-7cab192e5438.herokuapp.com/
- –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "üöÄ –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è"
- –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö 4 —ç—Ç–∞–ø–æ–≤

**–í—Ä—É—á–Ω—É—é –ø–æ —ç—Ç–∞–ø–∞–º**:
1. üè¢ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤
2. üéØ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞–¥–∏–π  
3. üì¶ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤
4. üìë –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤

### üìä –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –¥–∞–Ω–Ω—ã–º–∏

- **–ò—Å—Ç–æ—á–Ω–∏–∫**: Worksection –ø—Ä–æ–µ–∫—Ç—ã —Å –º–µ—Ç–∫–æ–π "eneca.work sync"
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: 5-—É—Ä–æ–≤–Ω–µ–≤–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –≤ eneca.work (Manager‚ÜíProject‚ÜíStage‚ÜíObject‚ÜíSection)
- **–¢–∏–ø —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**: –û–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è—è (—Ç–æ–ª—å–∫–æ Worksection ‚Üí eneca.work)
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –¢–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: Node.js + Express.js –Ω–∞ –ø–æ—Ä—Ç—É 3001 (Heroku) 
- **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: Worksection REST API + Supabase PostgreSQL API
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: HTML/CSS/JS –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π
- **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**: Heroku + –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ **ws-to-work-integration** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω—É—é –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω—é—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –º–µ–∂–¥—É Worksection –∏ eneca.work, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –∑–∞–¥–∞—á –≤ 5-—É—Ä–æ–≤–Ω–µ–≤—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏. –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫  
‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å**: –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞—Å—Ç–∏—á–Ω–æ–π –∏ –ø–æ–ª–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–æ—Å—Ç—É –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ë–µ—Å—à–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ü–æ–ª–Ω–∞—è –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ 
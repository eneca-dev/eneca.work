# Модуль Chat

Чат-бот для приложения Eneca с поддержкой GPT-4o-mini.

## Архитектура

```
modules/chat/
├── components/           # React компоненты
│   ├── ChatInterface.tsx    # Главный компонент с кнопкой и окном
│   ├── MessageList.tsx      # Список сообщений с автоскроллом  
│   ├── MessageInput.tsx     # Поле ввода с валидацией
│   └── TypingIndicator.tsx  # Индикатор "печатает"
├── hooks/               # React хуки
│   └── useChat.ts          # Управление состоянием чата
├── api/                 # API клиенты
│   └── chat.ts             # Взаимодействие с Edge Function
├── types/               # TypeScript типы
│   └── chat.ts             # Интерфейсы для чата
└── index.ts             # Главный экспорт
```

## Особенности

### Дизайн
- **Цветовая схема**: Темно-синий/серый (slate) + зеленые акценты
- **Круглая кнопка**: Справа снизу с индикатором активности
- **Анимации**: Плавные переходы и hover эффекты
- **Адаптивность**: Работает на всех устройствах

### Функциональность
- **Персонализация**: Знает имя пользователя из zustand store
- **Заглушка API**: Работает без backend для тестирования
- **Автоскролл**: К новым сообщениям
- **Валидация**: Лимит символов, обработка ошибок
- **UX**: Loading состояния, typing индикатор

## Использование

```tsx
import { ChatInterface } from '@/modules/chat'

// В layout или любом компоненте
<ChatInterface />
```

## API

### Компоненты
- `ChatInterface` - Главный компонент чата
- `MessageList` - Список сообщений  
- `MessageInput` - Поле ввода
- `TypingIndicator` - Индикатор печати

### Хуки
- `useChat()` - Управление состоянием чата

### Типы
- `ChatMessage` - Интерфейс сообщения
- `ChatRequest` - Запрос к API
- `ChatResponse` - Ответ от API

## Следующие шаги

1. **Edge Function**: Создать `/supabase/functions/chat`
2. **OpenAI**: Подключить GPT-4o-mini
3. **Персонализация**: Использовать данные пользователя
4. **Сохранение**: Добавить историю чата в БД (опционально)

## Backend Integration

Когда Edge Function будет готова, раскомментировать реальную реализацию в `api/chat.ts` и закомментировать заглушку. 
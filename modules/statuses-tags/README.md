# Модуль Статусы и теги

Модуль для управления статусами проектов и тегами в системе eneca.work.

## Структура модуля

```
modules/statuses-tags/
├── statuses/                    # Подмодуль статусов секций проектов
│   ├── components/              # Компоненты для работы со статусами
│   │   ├── StatusSelector.tsx   # Компонент выбора статуса
│   │   ├── StatusForm.tsx       # Форма создания/редактирования статуса
│   │   └── StatusesList.tsx     # Список статусов с управлением
│   ├── hooks/                   # Хуки для работы со статусами
│   │   └── useSectionStatuses.ts # Хук для загрузки и управления статусами
│   └── types.ts                 # Типы для статусов секций
├── types.ts                     # Общие типы модуля
├── StatusesTagsPage.tsx         # Главная страница модуля
└── StatusesTagsMenu.tsx         # Компонент для бокового меню
```

## Основные возможности

### Статусы секций проектов

- **Создание статусов**: Возможность создавать новые статусы для секций проектов
- **Редактирование**: Изменение названия, цвета и описания статусов
- **Удаление**: Безопасное удаление неиспользуемых статусов
- **Цветовая индикация**: Каждый статус имеет цвет для визуального различения

### Интеграция с формой создания секций

- **Обязательное поле**: При создании секции теперь обязательно выбрать статус
- **Валидация**: Форма не позволит создать секцию без выбранного статуса
- **Удобный селектор**: Компонент StatusSelector обеспечивает удобный выбор статуса

## База данных

Модуль работает с таблицей `section_statuses`:

```sql
CREATE TABLE section_statuses (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL UNIQUE,
  color VARCHAR NOT NULL,
  description TEXT
);
```

В таблице `sections` добавлено поле:

```sql
ALTER TABLE sections 
ADD COLUMN section_status_id UUID REFERENCES section_statuses(id);
```

## Использование

### Управление статусами

1. Перейдите в раздел "Статусы и теги" в боковом меню
2. Используйте кнопку "Добавить статус" для создания новых статусов
3. Нажмите на иконку редактирования для изменения статуса
4. Используйте иконку удаления для удаления неиспользуемых статусов

### Использование в проектах

При создании новой секции проекта:

1. Заполните название секции (обязательно)
2. Выберите статус из выпадающего списка (обязательно)
3. Заполните остальные поля по необходимости
4. Нажмите "Создать раздел"

## Компоненты

### StatusSelector

Переиспользуемый компонент для выбора статуса:

```tsx
<StatusSelector
  value={statusId}
  onChange={setStatusId}
  required={true}
  placeholder="Выберите статус..."
/>
```

### StatusForm

Модальная форма для создания и редактирования статусов:

```tsx
<StatusForm
  isOpen={isOpen}
  onClose={onClose}
  status={editingStatus} // null для создания нового
  onSuccess={onSuccess}
/>
```

### StatusesList

Основной компонент для отображения и управления списком статусов.

## Типы данных

### SectionStatus

```typescript
interface SectionStatus {
  id: string;
  name: string;
  color: string;
  description?: string;
}
```

### SectionStatusFormData

```typescript
interface SectionStatusFormData {
  name: string;
  color: string;
  description?: string;
}
```

## Интеграция

Модуль интегрирован в основное приложение через:

1. **App Router**: `/app/dashboard/statuses-tags/page.tsx`
2. **Боковое меню**: Добавлен пункт "Статусы и теги" в `components/sidebar.tsx`
3. **Форма секций**: Обновлена `modules/projects/components/CreateSectionModal.tsx`
4. **Типы проектов**: Добавлено поле `section_status_id` в `modules/projects/types.ts`

## Дальнейшее развитие

В будущем модуль можно расширить для:

- Управления тегами проектов
- Статусы для других сущностей (проекты, задачи)
- Группировка статусов по категориям
- Настройки доступа к управлению статусами 